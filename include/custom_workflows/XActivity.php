<?phpfunction insertCommitmentDateToTODO($entity){	global $all_flds;		if($all_flds['z_ac_followupcomdate'] != $entity->data['z_ac_followupcomdate']){		require_once('modules/Calendar/Activity.php');		require_once('modules/Calendar/CalendarCommon.php');		require_once('include/logging.php');		require_once("config.php");		require_once('include/database/PearDatabase.php');		$customerid = explode('x',$entity->data['z_ac_customer']);		$customerid = $customerid[1];				if(!empty($customerid)){			$focus_customer = CRMEntity::getInstance('XCustomers');			$focus_customer->retrieve_entity_info($customerid, 'XCustomers');						$customername = "{$focus_customer->column_fields['z_cu_customer']} - {$focus_customer->column_fields['z_cu_customername']}";			// $customername = getEntityName('XCustomers',array($customerid));			// $customername = $customername[$customerid];			$local_log =& LoggerManager::getLogger('index');			$focus = new Activity();						$tab_type = 'Calendar';			$focus->column_fields["activitytype"] = 'Task';			$focus->id = "";			$focus->mode = "";						$focus->column_fields['subject'] = "Follow-up for Customer {$customername} will be on {$entity->data['z_ac_followupcomdate']}.";			$focus->column_fields['assigned_user_id'] = $_SESSION['authenticated_user_id'];			$focus->column_fields['date_start'] = $entity->data['z_ac_followupcomdate'];			$focus->column_fields['time_start'] = "07:00:00";			$focus->column_fields['time_end'] = "07:10:00";			$focus->column_fields['due_date'] = $entity->data['z_ac_followupcomdate'];			$focus->column_fields['parent_id'] = "";			$focus->column_fields['contact_id'] = "";			$focus->column_fields['taskstatus'] = "Not Started";			$focus->column_fields['eventstatus'] = "";			$focus->column_fields['taskpriority'] = "High";			$focus->column_fields['sendnotification'] = 0;			$focus->column_fields['createdtime'] = "";			$focus->column_fields['modifiedtime'] = "";			$focus->column_fields['activitytype'] = "Task";			$focus->column_fields['visibility'] = "Private";			$focus->column_fields['description'] = "Follow-up for Customer {$customername} will be on {$entity->data['z_ac_followupcomdate']}.";			$focus->column_fields['duration_hours'] = "";			$focus->column_fields['duration_minutes'] = "";			$focus->column_fields['location'] = "";			$focus->column_fields['reminder_time'] = "";			$focus->column_fields['recurringtype'] = "";			$focus->column_fields['notime'] = 0;			$focus->column_fields['modifiedby'] = "";						$focus->save($tab_type);			}	}}?>